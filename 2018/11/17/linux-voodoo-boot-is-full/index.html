<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Linux voodoo: /boot is full</title>
        <link rel="stylesheet" href="https://conengmo.github.io/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://conengmo.github.io/">All Time Free Time </a></h1>
                <nav><ul>
                    <li><a href="https://conengmo.github.io/about/">About</a></li>
                    <li><a href="https://conengmo.github.io/category/c/">C</a></li>
                    <li><a href="https://conengmo.github.io/category/japan/">japan</a></li>
                    <li><a href="https://conengmo.github.io/category/python/">Python</a></li>
                    <li class="active"><a href="https://conengmo.github.io/category/uncategorized/">Uncategorized</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://conengmo.github.io/2018/11/17/linux-voodoo-boot-is-full/" rel="bookmark"
           title="Permalink to Linux voodoo: /boot is full">Linux voodoo: /boot is full</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-11-17T18:45:00+01:00">
                Published: Sat 17 November 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://conengmo.github.io/author/frank/">frank</a>
        </address>
<p>In <a href="https://conengmo.github.io/category/uncategorized/">Uncategorized</a>.</p>

</footer><!-- /.post-info -->      <p>I've occasionally had a weird, specific problem in Linux. <code>apt-get</code> wouldn't work anymore because <code>/boot</code> is full. You cannot just empty your <code>/boot</code>, that will break your system. Luckily, others wrote about this problem before: https://ubuntuforums.org/showthread.php?t=2360972.</p>
<p>Here's my guide on how to solve this problem.</p>
<p>Check your drives with <code>df</code>. Is <code>\boot</code> full? That sucks. Now apt cannot even clean it up by itself.</p>
<p>First look here: <code>ls /var/cache/apt/archives</code>. Note the lower kernel version number. I'm for example seeing a <code>generic_4.4.0.127</code> and <code>generic_4.4.0.128</code>.</p>
<p>List the ten largest files in your boot directory (note that officially you shouldn't parse the output from <code>ls</code>, because filenames can contain newline characters in them, yada yada, just do it and be productive):</p>
<p><code>ls -l -S /boot | head -10</code></p>
<p>Note the numbers. We'll remove kernel versions that you didn't see in the apt cache.</p>
<p>Run a loop to remove the files (note that you may need to change the 4.4.0 number):</p>
<p><code>for VARIABLE in 87 112 101 109 104 103 116 119 121 do     sudo dpkg --remove linux-image-4.4.0-$VARIABLE-generic linux-image-extra-4.4.0-$VARIABLE-generic done</code></p>
<p>Now <code>/boot</code> should have enough space. Check with <code>df /boot</code>.</p>
<p>Update the dependencies with <code>sudo apt-get install -f</code>. Hopefully everything went well without <code>/boot</code> running full again.</p>
<p><code>apt</code> should run again, and old stuff can be purged with <code>sudo apt-get autoremove</code>.</p>
<p>Now you can stop server wrangling and go back to building awesome stuff.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <!--<footer id="contentinfo" class="body">-->
                <!--<address id="about" class="vcard body">-->
                <!--Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.-->
                <!--</address>&lt;!&ndash; /#about &ndash;&gt;-->

                <!--<p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>-->
        <!--</footer>&lt;!&ndash; /#contentinfo &ndash;&gt;-->

</body>
</html>